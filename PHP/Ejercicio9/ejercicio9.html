<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!--<script src="scripts.js"></script>-->
    <title>Ejercicio 9 Lista</title>
    <style>
        body, html {
            height: 100%;
            width: 100%;
            margin: 0%;
            padding: 0%;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        #titulo, #pie {
            margin-left: 40%;
            float: left;
        }

        #cargar, #vaciar, #alta {
            float: left;
            height: 50px;
            width: 120px;
        }

        #cargar {
            margin-left: 200px;
        }

        #vaciar, #alta {
            margin-left: 10px;
        }

        #header, #footer {
            width: 100%;
            height: 10%;
            display: flex;
            align-items: center;
            font-size: 20px;
            background-color: lightblue;
        }

        #tabla {
            margin-top:0px;
            width: 100%;
            height: 544px;
            overflow:auto;
        }

        table {
            width: 100%;
            
        }

        tbody tr:nth-child(odd) {
            background: rgba(0,.5,0,.2);
        }

        tbody tr {
            background-color: lightgray;
        }
        thead tr {
            background-color: lightgray;
        }
        tbody{
            margin-left:20px;
            
        }

        td {
            width:167px;
            border-style: solid;
        } 

        tr {
            height: 50px;
            width: 100%;
        }

        thead {
            position: fixed;
            width: 100%;
        }
        

        thead {
            margin-top: 0%;
            
        }

        tfoot {
            margin-bottom: 0%;
            margin-top: 520px;
        }

        #titulo {
            margin-right: 100px;
        }
        #filtroCodigo, #filtroDescripcion, #filtroFamilia, #filtroFechaAlta, #filtroUm, #filtroStock{
            width:169px;
            height:30px;
            border:solid;
        }

        .sinEsconder {
            visibility: visible;
        }

        .escondido {
            visibility: hidden;
        }

        .bloq {
            pointer-events: none;
            opacity: 0.3;
        }

        .noBloq {
            pointer-events: auto;
            opacity: 1;
        }
        #afueraModi, #afueraAlta, #afueraRespuesta {
            width: 50%;
            height: 72%;
            /*border-style: solid;*/
            border-radius: 20px;
            background-color: lightgreen;
            padding: 2%;
            position: fixed;
            margin-top: 8%;
            margin-left: 25%;
        }

        #headerModi, #headerAlta, #headerRespuesta {
            width: 96%;
            height: 12%;
            margin-bottom: 3%;
            border-radius: 20px;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            background-color: grey;
            padding-right: 3%;
        }
        #enviarModi, #enviarAlta {
            width: 25%;
        }
        #cerrarModi, #cerrarAlta, #cerrarRespuesta {
            height: 80%;
            font-size: 25px;
            color: red;
        }

        #formularioModi, #formularioAlta {
            height: 70%;
            display: flex;
            flex-direction: column;
        }

            #formularioModi input, #formularioAlta input, select {
                width: 50%;
            }

        #general {
            height: 100%;
            width: 100%;
        }
        span{
            margin-right:200px;
            font-size:20px;
        }
    </style>
</head>

<body>
    <!--FORMULARIO MODIFICACION-->
    <div id="afueraModi" class="sinEsconder">
        <div id="headerModi">
            <span>Modificación de Articulo</span>
            <button id="cerrarModi">X</button>
        </div>
        <div id="cuerpoModi">
            <div id="formularioModi">
                <label for="codArtModi">CodArt:</label>
                <input id="codArtModi" name="codArtModi1" type="text" required />

                <label for="familiaModi">Familia:</label>
                <select id="familiaModi" name="familiaModi1" required >
                    
                </select>

                <label for="umModi">Unidad de Medida:</label>
                <input id="umModi" name="umModi1" type="text" required />

                <label for="descripcionModi">Descripcion:</label>
                <input id="descripcionModi" name="descripcionModi1" type="text" required />

                <label for="fechaAltaModi">Fecha de Alta:</label>
                <input id="fechaAltaModi" name="fechaAltaModi1" type="date" required />

                <label for="saldoStockModi">Saldo Stock:</label>
                <input id="saldoStockModi" name="saldoStockModi1" type="number" required />

                <button id="enviarModi">Enviar</button>

            </div>

        </div>
    </div>

    <!--FORMULARIO DE ALTA-->
    <div id="afueraAlta" class="sinEsconder">
        <div id="headerAlta">
            <span>Alta de Articulo</span>
            <button id="cerrarAlta">X</button>
        </div>
        <div id="cuerpoAlta">
            <div id="formularioAlta">
                <label for="codArtAlta">CodArt:</label>
                <input id="codArtAlta" name="codArtAlta" type="text" required />

                <label for="familiaAlta">Familia:</label>
                <select id="familiaAlta" name="familiaAlta" required >
                </select>
                <label for="umAlta">Unidad de Medida:</label>
                <input id="umAlta" name="umAlta" type="text" required />

                <label for="descripcionAlta">Descripcion:</label>
                <input id="descripcionAlta" name="descripcionAlta" type="text" required />

                <label for="fechaAltaAlta">Fecha de Alta:</label>
                <input id="fechaAltaAlta" name="fechaAltaAlta" type="date" required />

                <label for="saldoStockAlta">Saldo Stock:</label>
                <input id="saldoStockAlta" name="saldoStockAlta" type="number" required />

                <button id="enviarAlta">Enviar</button>

            </div>

        </div>
    </div>

    <!--RESPUESTA DEL SERVIDOR-->
    <div id="afueraRespuesta" class="sinEsconder">
        <div id="headerRespuesta">
            <span>Respuesta del Servidor</span>
            <button id="cerrarRespuesta">X</button>
        </div>
        <div id="cuerpoRespuesta">
            <div id="respuestaServer">
                

            </div>

        </div>
    </div>
    <!--acá arranca la tabla-->

    <div id="general">
        <div id="header">
            <h2 id="titulo">Articulos</h2>
            Orden:
            <input type="text" id="orden" readonly />
            <button id="cargar">Cargar Datos</button>
            <button id="vaciar">Vaciar Datos</button>
            <button id="alta">Alta Registro</button>
        </div>
        <div id="filtros"><input id="filtroCodigo" type="text" /><input id="filtroFamilia" type="text" /><input id="filtroUm" type="text" /><input id="filtroDescripcion" type="text" /><input id="filtroFechaAlta" type="text" /><input id="filtroStock" type="text" /></div>

        <div id="tabla">
            <table>
                <thead>
                    <tr>
                        <td id="codArt">
                            Cod.Art.
                        </td>
                        <td id="familia">
                            Familia
                        </td>
                        <td id="um">
                            U.M.
                        </td>
                        <td id="descripcion">
                            Descripción
                        </td>
                        <td id="fechaAlta">
                            Fecha Alta
                        </td>
                        <td id="saldoStock">
                            Stock
                        </td>
                        <td id="pdf">
                            PDF
                        </td>
                        <td id="modi">
                            Modi
                        </td>
                        <td id="baja">
                            Baja
                        </td>
                    </tr>
                </thead>


                <tbody id="bod">
                </tbody>
            </table>
        </div>

        <div id="footer">
            <h6 id="totalRegistros"></h6>
            <h2 id="pie">Pie</h2>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            //OBJETOS DEL DOM TRANSFORMADOS A VARIABLE
            var tabla = $("#general");
            var formularioModi = $("#afueraModi");
            var formularioAlta = $("#afueraAlta");
            var respuestaServer = $("#afueraRespuesta");
            var btnEnviarModi = $("#enviarModi");
            var btnEnviarAlta = $("#enviarAlta");
            var txtCodArtModi = $("#codArtModi");   //MODI
            var txtFamiliaModi = $("#familiaModi");
            var txtUmModi = $("#umModi");
            var txtDescripcionModi = $("#descripcionModi");
            var txtFechaAltaModi = $("#fechaAltaModi");
            var txtSaldoStockModi = $("#saldoStockModi");
            var txtCodArtAlta = $("#codArtAlta");   //ALTA
            var txtFamiliaAlta = $("#familiaAlta");
            var txtUmAlta = $("#umAlta");
            var txtDescripcionAlta = $("#descripcionAlta");
            var txtFechaAltaAlta = $("#fechaAltaAlta");
            var txtSaldoStockAlta = $("#saldoStockAlta");

            //INICIALIZACION DE LOS COMPONENTES DEL DOM
            formularioModi.css("visibility", "hidden");
            formularioAlta.css("visibility", "hidden");
            respuestaServer.css("visibility", "hidden");

            btnEnviarModi.attr("disabled", true);
            btnEnviarAlta.attr("disabled", true);

            //BOTONES
            $("#codArtModi").keyup(function () { //KEYUPS DE MODI
                alert("daledale");
                ValidarModi();
            });
            $("#familiaModi").keyup(function () {
                ValidarModi();
            });
            $("#familiaModi").keyup(function () {
                ValidarModi();
            });
            $("#umModi").keyup(function () {
                ValidarModi();
            });
            $("#fechaAltaModi").keyup(function () {
                ValidarModi();
            });
            $("#saldoStockModi").keyup(function () {
                ValidarModi();
            });

            txtCodArtModi.keyup(function () { //KEYUPS DE ALTA
                ValidarAlta();
            });
            txtDescripcionModi.keyup(function () {
                ValidarAlta();
            });
            txtFamiliaModi.keyup(function () {
                ValidarAlta();
            });
            txtUmModi.keyup(function () {
                ValidarAlta();
            });
            txtFechaAltaModi.keyup(function () {
                ValidarAlta();
            });
            txtSaldoStockModi.keyup(function () {
                ValidarAlta();
            });



            btnEnviarModi.click(function () {   //ENVIO DE MODI
                Modificar();
            });

            btnEnviarAlta.click(function () {   //ENVIO DE ALTA
                Alta();
            });

            $("#vaciar").click(function () {    //BOTON VACIAR DATOS
                $("#bod").empty();
            });

            $("#cargar").click(function () {    //BOTON CARGAR DATOS
                if ($("#filtroCodigo").val() == "" && $("#filtroFamilia").val() == "" && $("#filtroUm").val() == "" && $("#filtroDescripcion").val() == "" && $("#filtroFechaAlta").val() == "" && $("#filtroStock").val() == "") {
                    cargaTabla();
                } else {
                    cargaTablaOrdenadaYFiltrada();
                }

            });

            $("#alta").click(function () {  //BOTON ALTA REGISTRO
                tabla.addClass("bloq");
                formularioAlta.css("visibility", "visible");
                VaciarFormularioAlta();
                LlenarFamiliasAlta(); 
            });

            // CLICK EN HEADERS

            $("#codArt").click(function () {
                $("#orden").val("codArt");
                cargaTablaOrdenada();
            });

            $("#familia").click(function () {
                $("#orden").val("familia");

                cargaTablaOrdenada();
            });

            $("#um").click(function () {
                $("#orden").val("um");
                cargaTablaOrdenada();
            });

            $("#descripcion").click(function () {
                $("#orden").val("descripcion");
                cargaTablaOrdenada();
            });

            $("#fechaAlta").click(function () {
                $("#orden").val("fechaAlta");
                cargaTablaOrdenada();
            });

            $("#saldoStock").click(function () {
                $("#orden").val("saldoStock");
                cargaTablaOrdenada();
            });

            $("#cerrarModi").click(function () {
                tabla.addClass("noBloq");
                formularioModi.css("visibility", "hidden");
            });

            $("#cerrarAlta").click(function () {
                tabla.addClass("noBloq");
                formularioAlta.css("visibility", "hidden");
            });

            $("#cerrarRespuesta").click(function () {
                tabla.addClass("noBloq");
                respuestaServer.css("visibility", "hidden");
            });

            //FUNCIONES DE INTERACCION CON LA TABLA
            function CompletaFormModi(argArticulo) {    //COMPLETA FORMULARIO DE MODIFICACION
                txtCodArtModi.val(argArticulo);
                var objAjax = $.ajax({
                    type: "get",
                    url: "./salidaConsulta.php",
                    data: { codArt: argArticulo, ID: "completaFormModi" },
                    success: function (respuestaDelServer, estado) {
                        objetoDato = JSON.parse(respuestaDelServer);

                        txtDescripcionModi.val(objetoDato.descripcion);
                        txtFamiliaModi.val(objetoDato.familia);
                        txtFechaAltaModi.val(objetoDato.fechaAlta);
                        txtSaldoStockModi.val(objetoDato.saldoStock);
                        txtUmModi.val(objetoDato.um);

                    } //cierra el success
                }); //cierro ajax
            }

            function LlenarFamiliasModi() { //LLENA COMBO BOX DEL MODI
                var objAjax = $.ajax({
                    type: "get",
                    url: "./salidaConsulta.php",
                    data: { ID: "llenaLista" },
                    success: function (respuestaDelServer, estado) {
                        objetoDato = JSON.parse(respuestaDelServer);
                        //alert(objetoDato.familias[1].nombreFamilia);
                        txtFamiliaModi.empty();
                        objetoDato.familias.forEach(function (argValor, argIndice) {
                            //alert(argValor.nombreFamilia);
                            txtFamiliaModi.append("<option>" + argValor.nombreFamilia + "</option>");
                        });
                    } //cierra el success
                }); //cierro ajax
            }

            function LlenarFamiliasAlta() { //LLENA COMBO BOX DEL ALTA
                var objAjax = $.ajax({
                    type: "get",
                    url: "./salidaConsulta.php",
                    data: { ID: "llenaLista" },
                    success: function (respuestaDelServer, estado) {
                        objetoDato = JSON.parse(respuestaDelServer);
                        //alert(objetoDato.familias[1].nombreFamilia);
                        txtFamiliaAlta.empty();
                        objetoDato.familias.forEach(function (argValor, argIndice) {
                            //alert(argValor.nombreFamilia);
                            txtFamiliaAlta.append("<option>" + argValor.nombreFamilia + "</option>");
                        });
                    } //cierra el success
                }); //cierro ajax
            }

            function VaciarFormularioAlta() { //VACIA EL FORMULARIO DE ALTA
                txtCodArtAlta.val("");
                txtDescripcionAlta.val("");
                txtFechaAltaAlta.val("");
                txtSaldoStockAlta.val("");
                txtUmAlta.val("");
            }

            function ValidarModi() {    //VALIDACION DE MODIFICACION
                if ($("#codArtModi").checkValidity() && $("#descripcionModi").checkValidity()
                    && $("#familiaModi").checkValidity()
                    && $("#fechaAltaModi").checkValidity() && $("#umModi").checkValidity()
                    && $("#saldoStockModi").checkValidity()) {
                    alert("if");
                    btnEnviarModi.attr("disabled", "false");
                }
                else {
                    alert("else");
                    btnEnviarModi.attr("disabled", "true");
                }
            }

            function ValidarAlta() {    //VALIDACION DE ALTA
                if ((txtCodArtAlta.checkValidity() == true) && (txtDescripcionAlta.checkValidity() == true)
                    && (txtFamiliaAlta.checkValidity() == true)
                    && (txtFechaAltaAlta.checkValidity() == true) && (txtUmAlta.checkValidity() == true)
                    && (txtSaldoStockAlta.checkValidity() == true)) {
                    btnEnviarAlta.attr("disabled", false);
                }
                else {
                    btnEnviarAlta.attr("disabled", true);
                }
            }

            function Modificar() {      // FUNCION DE MODIFICACION DE ARTICULO
                var objAjax = $.ajax({
                    type: "GET",
                    url: "salidaConsulta.php",
                    data: {
                        ID: "modificar",
                        codArt: txtCodArtModi.val(),
                        familia: txtFamiliaModi.val(),
                        um: txtUmModi.val(),
                        descripcion: txtDescripcionModi.val(),
                        fechaAlta: txtFechaAltaModi.val(),
                        saldoStock: txtSaldoStockModi.val(),
                    },
                    success: function (respuestaDelServer, estado) {
                        formularioModi.css("visibility", "hidden");
                        respuestaServer.css("visibility", "visible");
                        $("#respuestaServer").empty();
                        $("#respuestaServer").append("<h1>" + respuestaDelServer + "</h1>");
                        cargaTabla();
                    }//cierra funcion asignada al success
                }); //cierra objeto de parametros y funcion ajax
            }

            function Alta() {      
                var objAjax = $.ajax({
                    type: "GET",
                    url: "salidaConsulta.php",
                    data: {
                        ID: "alta",
                        codArt: txtCodArtAlta.val(),
                        familia: txtFamiliaAlta.val(),
                        um: txtUmAlta.val(),
                        descripcion: txtDescripcionAlta.val(),
                        fechaAlta: txtFechaAltaAlta.val(),
                        saldoStock: txtSaldoStockAlta.val(),
                    },
                    success: function (respuestaDelServer, estado) {
                        formularioAlta.css("visibility", "hidden");
                        respuestaServer.css("visibility", "visible");
                        $("#respuestaServer").empty();
                        $("#respuestaServer").append("<h1>" + respuestaDelServer + "</h1>");
                        cargaTabla();
                    }//cierra funcion asignada al success
                }); //cierra objeto de parametros y funcion ajax
            }

            function Baja(codigoABajar) {   //FUNCION PARA LA BAJA
                var objAjax = $.ajax({
                    type: "GET",
                    url: "salidaConsulta.php",
                    data: {
                        ID: "baja",
                        codArt: codigoABajar,
                    },
                    success: function (respuestaDelServer, estado) {
                        respuestaServer.css("visibility", "visible");
                        $("#respuestaServer").empty();
                        $("#respuestaServer").append("<h1>" + respuestaDelServer + "</h1>");
                        cargaTabla();
                    }//cierra funcion asignada al success
                }); //cierra objeto de parametros y funcion ajax
            }

            function cargaTablaOrdenadaYFiltrada() {    //CARGA TABLA ORDENADA Y FILTRADA

                $("#bod").empty();
                $("#bod").html("<p>Eserando respuesta ..</p>");
                var objAjax = $.ajax({
                    type: "GET",
                    url: "salidaConsulta.php",
                    data: {
                        ID: "ordenaryfiltrar",
                        orden: $("#orden").val(),
                        filtroCodigo: $("#filtroCodigo").val(),
                        filtroFamilia: $("#filtroFamilia").val(),
                        filtroUm: $("#filtroUm").val(),
                        filtroDescripcion: $("#filtroDescripcion").val(),
                        filtroFechaAlta: $("#filtroFechaAlta").val(),
                        filtroStock: $("#filtroStock").val(),
                    },
                    success: function (respuestaDelServer, estado) {
                        //$("#bod").append("DALE FORROOOOOOOOOOOOOOOOOOOOOO");
                        //$("#bod").append(" " + respuestaDelServer + "...AAAA");

                        $("#bod").empty();
                        //alert("sucess");

                        rtaJson = respuestaDelServer;
                        var objJson = JSON.parse(rtaJson);
                        //$("#bod").html(objJson["articulos"][1]["codArt"]);
                        var objTbDatos = $("#bod");
                        //$("#bod").append(" " + respuestaDelServer + "...AAAA");
                        //$("#bod").append("DALE FORROOOOOOOOOOOOOOOOOOOOOO");
                        //objTbDatos.append(objJson.articulos[1].familia + "<br/>" + objJson.articulos[1].codArt);
                        //objTbDatos.html(objJson["articulos"][1]["familia"]);
                        objJson.articulos.forEach(function (argValor, argIndice) {

                            var objTr = document.createElement("tr");
                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.codArt;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.familia;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.um;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.descripcion;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.fechaAlta;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.saldoStock;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.setAttribute("campo-dato", "btnPdf");
                            objTd.innerHTML = "<button class='btCelda'>PDF</button>";
                            objTd.onclick = function () {
                                tabla.addClass("bloq");
                                respuestaServer.css("visibility", "visible");
                                TraerPdf(argValor.codArt);
                            };
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.setAttribute("campo-dato", "btnModi");
                            objTd.innerHTML = "<button class='btCelda'>Modi</button>";
                            objTd.onclick = function () {
                                tabla.addClass("bloq");
                                formularioModi.css("visibility", "visible");
                                LlenarFamiliasModi();
                                CompletaFormModi(argValor.codArt);
                            };
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.setAttribute("campo-dato", "btnBorrar");
                            objTd.innerHTML = "<button class='btCelda'>Baja</button>";
                            objTd.onclick = function () {
                                if (confirm("Está seguro de borrar el articulo " + argValor.codArt + "?")) {
                                    Baja(argValor.codArt);
                                }

                            };
                            objTr.appendChild(objTd);

                            objTbDatos.append(objTr);
                        });//cierra el forEach
                        //$("#bod").append(" " + respuestaDelServer + "...AAAA");
                        $("#totalRegistros").html("Nro de registros: " + ((objJson.articulos.length) - 1));
                        //$("#footer").html(" " + respuestaDelServer + "...AAAA");
                    }//cierra funcion asignada al success
                }); //cierra objeto de parametros y funcion ajax
            }

            function cargaTablaOrdenada() { // FUNCION CARGA TABLA ORDENADA

                $("#bod").empty();
                $("#bod").html("<p>Eserando respuesta ..</p>");
                var objAjax = $.ajax({
                    type: "GET",
                    url: "salidaConsulta.php",
                    data: {
                        ID: "ordenar",
                        orden: $("#orden").val(),
                    },
                    success: function (respuestaDelServer, estado) {
                        $("#bod").empty();
                        //alert("sucess");
                        //$("#bod").append(" " + respuestaDelServer + "...AAAA");
                        objJson = JSON.parse(respuestaDelServer);
                        //$("#bod").append(objJson.articulos[1].codArt);
                        var objTbDatos = $("#bod");

                        //objTbDatos.html(objJson["articulos"][1]["familia"]);
                        objJson.articulos.forEach(function (argValor, argIndice) {
                            var objTr = document.createElement("tr");
                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.codArt;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.familia;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.um;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.descripcion;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.fechaAlta;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.saldoStock;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.setAttribute("campo-dato", "btnPdf");
                            objTd.innerHTML = "<button class='btCelda'>PDF</button>";
                            objTd.onclick = function () {
                                tabla.addClass("bloq");
                                respuestaServer.css("visibility", "visible");
                                TraerPdf(argValor.codArt);
                            };
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.setAttribute("campo-dato", "btnModi");
                            objTd.innerHTML = "<button class='btCelda'>Modi</button>";
                            objTd.onclick = function () {
                                tabla.addClass("bloq");
                                formularioModi.css("visibility", "visible");
                                LlenarFamiliasModi();
                                CompletaFormModi(argValor.codArt);
                            };
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.setAttribute("campo-dato", "btnBorrar");
                            objTd.innerHTML = "<button class='btCelda'>Baja</button>";
                            objTd.onclick = function () {
                                if (confirm("Está seguro de borrar el articulo " + argValor.codArt + "?")) {
                                    Baja(argValor.codArt);
                                }

                            };
                            objTr.appendChild(objTd);

                            objTbDatos.append(objTr);
                        });//cierra el forEach
                        $("#totalRegistros").html("Nro de registros: " + ((objJson.articulos.length) - 1));
                        //$("#footer").html(" " + respuestaDelServer + "...AAAA");
                    }//cierra funcion asignada al success
                }); //cierra objeto de parametros y funcion ajax
            }

            function cargaTabla() { //FUNCION CARGA TABLA

                $("#bod").empty();
                $("#bod").html("<p>Eserando respuesta ..</p>");
                var objAjax = $.ajax({
                    type: "GET",
                    url: "salidaConsulta.php",
                    data: {
                        ID: "cargar",
                    },
                    success: function (respuestaDelServer, estado) {
                        $("#bod").empty();
                        //alert("sucess");
                        //$("#bod").html(" " + respuestaDelServer + "...AAAA");
                        objJson = JSON.parse(respuestaDelServer);
                        //$("#bod").html(objJson["articulos"][1]["codArt"]);
                        var objTbDatos = $("#bod");

                        //objTbDatos.html(objJson["articulos"][1]["familia"]);
                        objJson.articulos.forEach(function (argValor, argIndice) {
                            var objTr = document.createElement("tr");
                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.codArt;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.familia;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.um;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.descripcion;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.fechaAlta;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.innerHTML = argValor.saldoStock;
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.setAttribute("campo-dato", "btnPdf");
                            objTd.innerHTML = "<button class='btCelda'>PDF</button>";
                            objTd.onclick = function () {
                                tabla.addClass("bloq");
                                respuestaServer.css("visibility", "visible");
                                TraerPdf(argValor.codArt);
                            };
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.setAttribute("campo-dato", "btnModi");
                            objTd.innerHTML = "<button class='btCelda'>Modi</button>";
                            objTd.onclick = function () {
                                tabla.addClass("bloq");
                                formularioModi.css("visibility", "visible");
                                LlenarFamiliasModi();
                                CompletaFormModi(argValor.codArt);
                            };
                            objTr.appendChild(objTd);

                            var objTd = document.createElement("td");
                            objTd.setAttribute("campo-dato", "btnBorrar");
                            objTd.innerHTML = "<button class='btCelda'>Borrar</button>";
                            objTd.onclick = function () {
                                if (confirm("Está seguro de borrar el articulo " + argValor.codArt + "?")) {
                                    Baja(argValor.codArt);
                                }

                            };
                            objTr.appendChild(objTd);

                            objTbDatos.append(objTr);
                        });//cierra el forEach
                        $("#totalRegistros").html("Nro de registros: " + ((objJson.articulos.length) - 1));
                        //$("#footer").html(" " + respuestaDelServer + "...AAAA");
                    }//cierra funcion asignada al success
                }); //cierra objeto de parametros y funcion ajax
            }

        });
    </script>
</body>
</html>
